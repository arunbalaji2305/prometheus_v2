apiVersion: 1

# Alert Policies (Notification Routing)
# These define how alerts are routed to contact points
policies:
  - orgId: 1
    # Root policy - catches all alerts by default
    receiver: email-alerts
    # Group alerts by these labels
    group_by:
      - alertname
      - severity
    # Time to wait before sending the first notification
    group_wait: 30s
    # Time to wait before sending updates about the same group
    group_interval: 5m
    # Time to wait before re-sending a notification if the alert is still firing
    repeat_interval: 4h
    
    # Routes for specific alert types
    routes:
      # Critical alerts go to multiple channels
      - receiver: email-alerts
        matchers:
          - severity = critical
        continue: true  # Continue to next matching route
        group_wait: 10s
        repeat_interval: 1h
      
      # Warning alerts
      - receiver: email-alerts
        matchers:
          - severity = warning
        group_wait: 1m
        repeat_interval: 12h
      
      # Info alerts (less urgent)
      - receiver: email-alerts
        matchers:
          - severity = info
        group_wait: 5m
        repeat_interval: 24h
